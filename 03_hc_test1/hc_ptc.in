###############################################
###
### This file is generated by txpp. Do not edit.
###
### Input file : D:\001_zerlingx\literature\HC\006_models\03_hc_test1\hc_ptc.pre
### Output file: D:\001_zerlingx\literature\HC\006_models\03_hc_test1\hc_ptc.in
### Translation: Sat, 22 Dec 2018 20:06:48
###
###############################################

nsteps = 4000
dumpPeriodicity = 100
dt = 1e-11
dimension = 2
floattype = double
verbosity = 127
copyHistoryAtEachDump = 0
useGridBndryRestore = True
constructUniverse = False

<Grid globalGrid>
  verbosity = 127
  numCells = [155  70  12]
  lengths = [0.0155 0.007 1.0]
  startPositions = [0.0 -0.0035 0.0]
  maxCellXings = 1
</Grid>

<Decomp decomp>
  periodicDirs = []
</Decomp>

<EmMaterial PEC>
  kind = conductor
  resistance = 0.0
</EmMaterial>

<GridBoundary hc_ptcPecShapes>
  kind = gridRgnBndry
  calculateVolume = 1
  dmFrac = 0.4
  polyfilename = hc_ptcPecShapes.stl
  flipInterior = True
  scale = [1.0  1.0  1.0]
  printGridData = False
  mappedPolysfile = hc_ptcPecShapes_mapped.stl
</GridBoundary>

<GridBoundary cathode_shell>
  kind = gridRgnBndry
  calculateVolume = 1
  dmFrac = 0.4
  polyfilename = cathode_shell.stl
  flipInterior = True
  scale = [1.0  1.0  1.0]
  printGridData = False
  mappedPolysfile = cathode_shell_mapped.stl
</GridBoundary>

<GridBoundary cathode_orifice>
  kind = gridRgnBndry
  calculateVolume = 1
  dmFrac = 0.4
  polyfilename = cathode_orifice.stl
  flipInterior = True
  scale = [1.0  1.0  1.0]
  printGridData = False
  mappedPolysfile = cathode_orifice_mapped.stl
</GridBoundary>

<GridBoundary anode>
  kind = gridRgnBndry
  calculateVolume = 1
  dmFrac = 0.4
  polyfilename = anode.stl
  flipInterior = True
  scale = [1.0  1.0  1.0]
  printGridData = False
  mappedPolysfile = anode_mapped.stl
</GridBoundary>

<GridBoundary emitter>
  kind = gridRgnBndry
  calculateVolume = 1
  dmFrac = 0.4
  polyfilename = emitter.stl
  flipInterior = True
  scale = [1.0  1.0  1.0]
  printGridData = False
  mappedPolysfile = emitter_mapped.stl
</GridBoundary>

<MultiField esMultiField>

  <Field E>
    numComponents = 3
    offset = edge
    kind = regular
    overlap = [1 1]
    labels = [E_x   E_y   E_z]
  </Field>

  <Field nodalE>
    numComponents = 3
    offset = none
    kind = regular
    overlap = [1 2]
    labels = [nodalE_x   nodalE_y   nodalE_z]
  </Field>

  <Field nodalB>
    numComponents = 3
    offset = none
    kind = regular
    overlap = [1 2]
    labels = [nodalB_x   nodalB_y   nodalB_z]
  </Field>

  <Field Phi>
    numComponents = 1
    offset = none
    kind = regular
    overlap = [1 2]
    labels = [Phi]
  </Field>

  <Field ChargeDensity>
    numComponents = 1
    offset = none
    kind = depField
    overlap = [1 2]
    labels = [ChargeDensity]
  </Field>

  <FieldUpdater gradPhi>
    kind = gradVecUpdater
    factor = -1.0
    lowerBounds = [0  0  0]
    upperBounds = [155   70   12]
    readFields = [Phi]
    writeFields = [E]
  </FieldUpdater>

  <FieldUpdater edgeToNode>
    kind = edgeToNodeVec
    lowerBounds = [0  0  0]
    upperBounds = [156  71  13]
    readFields = [E]
    writeFields = [nodalE]
  </FieldUpdater>

  <FieldUpdater copyPerimlowerX>
    kind = unaryFieldOpUpdater
    minDim = 1
    lowerBounds = [0  0  0]
    upperBounds = [1  71  13]
    operation = set
    bumpReadIter = [0  0  0]
    readFields = [E]
    component = 0
    writeFields = [nodalE]

    <STFunc copyFunc>
      kind = constantFunc
      amplitude = 1.
    </STFunc>

  </FieldUpdater>

  <FieldUpdater copyPerimupperX>
    kind = unaryFieldOpUpdater
    minDim = 1
    lowerBounds = [155  0  0]
    upperBounds = [156  71  13]
    operation = set
    bumpReadIter = [-1  0  0]
    readFields = [E]
    component = 0
    writeFields = [nodalE]

    <STFunc copyFunc>
      kind = constantFunc
      amplitude = 1.
    </STFunc>

  </FieldUpdater>

  <FieldUpdater copyPerimlowerY>
    kind = unaryFieldOpUpdater
    minDim = 2
    lowerBounds = [0  0  0]
    upperBounds = [156  1  13]
    operation = set
    bumpReadIter = [0  0  0]
    readFields = [E]
    component = 1
    writeFields = [nodalE]

    <STFunc copyFunc>
      kind = constantFunc
      amplitude = 1.
    </STFunc>

  </FieldUpdater>

  <FieldUpdater copyPerimupperY>
    kind = unaryFieldOpUpdater
    minDim = 2
    lowerBounds = [0  70  0]
    upperBounds = [156  71  13]
    operation = set
    bumpReadIter = [0  -1  0]
    readFields = [E]
    component = 1
    writeFields = [nodalE]

    <STFunc copyFunc>
      kind = constantFunc
      amplitude = 1.
    </STFunc>

  </FieldUpdater>

  <InitialUpdateStep esSolveInitialUpdateStep>
    alsoAfterRestore = True
    updaters = [esSolve]
    messageFields = [Phi]
  </InitialUpdateStep>

  <InitialUpdateStep edgeToNodeInitStep>
    alsoAfterRestore = True
    updaters = [edgeToNode]
    messageFields = [Phi]
  </InitialUpdateStep>

  <InitialUpdateStep gradPhiInitStep>
    alsoAfterRestore = True
    updaters = [gradPhi]
    messageFields = [E]
  </InitialUpdateStep>

  <UpdateStep esSolveStep>
    toDtFrac = 1.0
    updaters = [esSolve]
    messageFields = [Phi]
  </UpdateStep>

  <UpdateStep gradPhiStep>
    toDtFrac = 1.0
    updaters = [gradPhi]
    messageFields = [E]
  </UpdateStep>

  <UpdateStep edgeToNodeStep>
    toDtFrac = 1.0
    updaters = [edgeToNode]
    messageFields = [nodalE]
  </UpdateStep>

  <UpdateStep copyPerimlowerXStep>
    toDtFrac = 1.0
    updaters = [copyPerimlowerX]
    messageFields = [nodalE]
  </UpdateStep>

  <UpdateStep copyPerimupperXStep>
    toDtFrac = 1.0
    updaters = [copyPerimupperX]
    messageFields = [nodalE]
  </UpdateStep>

  <UpdateStep copyPerimlowerYStep>
    toDtFrac = 1.0
    updaters = [copyPerimlowerY]
    messageFields = [nodalE]
  </UpdateStep>

  <UpdateStep copyPerimupperYStep>
    toDtFrac = 1.0
    updaters = [copyPerimupperY]
    messageFields = [nodalE]
  </UpdateStep>

  <FieldUpdater esSolve>
    kind = linearSolveUpdater
    lowerBounds = [0  0]
    upperBounds = [156  71]
    readFields = [ChargeDensity]
    readComponents = [0]
    writeFields = [Phi]
    writeComponents = [0]
    writeEquationToFile = 0

    <MatrixFiller interiorFiller>
      kind = nodeStencilFiller
      gridBoundary = hc_ptcPecShapes
      rowInteriorosity = [insideBoundary]
      colInteriorosity = [insideBoundary cutByBoundary outsideBoundary]
      component = 0
      minDim = 1
      lowerBounds = [1  1  1]
      upperBounds = [155   70   12]

      <StencilElement lap_dd>
        value = 0.0035416751270481556
        minDim = 0
        cellOffset = [0 0 0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

      <StencilElement lap_px>
        value = -0.0008854187817620389
        minDim = 1
        cellOffset = [1 0 0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

      <StencilElement lap_mx>
        value = -0.0008854187817620389
        minDim = 1
        cellOffset = [-1 0 0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

      <StencilElement lap_py>
        value = -0.0008854187817620389
        minDim = 2
        cellOffset = [0 1 0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

      <StencilElement lap_my>
        value = -0.0008854187817620389
        minDim = 2
        cellOffset = [0 -1 0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

      <StencilElement lap_pz>
        value = 0
        minDim = 3
        cellOffset = [0 0 1]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

      <StencilElement lap_mz>
        value = 0
        minDim = 3
        cellOffset = [0 0 -1]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

    </MatrixFiller>

    <VectorWriter interiorWriter>
      kind = nodeFieldVectorWriter
      gridBoundary = hc_ptcPecShapes
      interiorosity = [insideBoundary]
      minDim = 1
      readField = ChargeDensity
      readComponent = 0
      lowerBounds = [1  1  1]
      upperBounds = [155   70   12]
      component = 0
    </VectorWriter>

    <VectorReader phiReader>
      kind = fieldVectorReader
      minDim = 0
      writeField = Phi
      writeComponent = 0
      lowerBounds = [0  0]
      upperBounds = [156  71]
      componentBounds = [0 1]
    </VectorReader>

    <MatrixFiller cathode_shell_bndFiller>
      kind = nodeStencilFiller
      gridBoundary = cathode_shell
      rowInteriorosity = [cutByBoundary outsideBoundary]
      colInteriorosity = [cutByBoundary outsideBoundary]
      component = 0
      minDim = 1
      lowerBounds = [1  1  1]
      upperBounds = [155   70   12]

      <StencilElement ident>
        value = 0.0035416751270481556
        minDim = 1
        cellOffset = [0 0 0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

    </MatrixFiller>

    <VectorWriter cathode_shell_bndWriter>
      kind = stFuncNodeVectorWriter
      gridBoundary = cathode_shell
      minDim = 1
      lowerBounds = [1  1  1]
      upperBounds = [155   70   12]
      component = 0
      interiorosity = [cutByBoundary outsideBoundary]

      <STFunc function>
        kind = expression
        expression = 0.0
      </STFunc>

      scaling = 0.0035416751270481556
    </VectorWriter>

    <MatrixFiller cathode_orifice_bndFiller>
      kind = nodeStencilFiller
      gridBoundary = cathode_orifice
      rowInteriorosity = [cutByBoundary outsideBoundary]
      colInteriorosity = [cutByBoundary outsideBoundary]
      component = 0
      minDim = 1
      lowerBounds = [1  1  1]
      upperBounds = [155   70   12]

      <StencilElement ident>
        value = 0.0035416751270481556
        minDim = 1
        cellOffset = [0 0 0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

    </MatrixFiller>

    <VectorWriter cathode_orifice_bndWriter>
      kind = stFuncNodeVectorWriter
      gridBoundary = cathode_orifice
      minDim = 1
      lowerBounds = [1  1  1]
      upperBounds = [155   70   12]
      component = 0
      interiorosity = [cutByBoundary outsideBoundary]

      <STFunc function>
        kind = expression
        expression = 0.0
      </STFunc>

      scaling = 0.0035416751270481556
    </VectorWriter>

    <MatrixFiller anode_bndFiller>
      kind = nodeStencilFiller
      gridBoundary = anode
      rowInteriorosity = [cutByBoundary outsideBoundary]
      colInteriorosity = [cutByBoundary outsideBoundary]
      component = 0
      minDim = 1
      lowerBounds = [1  1  1]
      upperBounds = [155   70   12]

      <StencilElement ident>
        value = 0.0035416751270481556
        minDim = 1
        cellOffset = [0 0 0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

    </MatrixFiller>

    <VectorWriter anode_bndWriter>
      kind = stFuncNodeVectorWriter
      gridBoundary = anode
      minDim = 1
      lowerBounds = [1  1  1]
      upperBounds = [155   70   12]
      component = 0
      interiorosity = [cutByBoundary outsideBoundary]

      <STFunc function>
        kind = expression
        expression = 100.0
      </STFunc>

      scaling = 0.0035416751270481556
    </VectorWriter>

    <MatrixFiller emitter_bndFiller>
      kind = nodeStencilFiller
      gridBoundary = emitter
      rowInteriorosity = [cutByBoundary outsideBoundary]
      colInteriorosity = [cutByBoundary outsideBoundary]
      component = 0
      minDim = 1
      lowerBounds = [1  1  1]
      upperBounds = [155   70   12]

      <StencilElement ident>
        value = 0.0035416751270481556
        minDim = 1
        cellOffset = [0 0 0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

    </MatrixFiller>

    <VectorWriter emitter_bndWriter>
      kind = stFuncNodeVectorWriter
      gridBoundary = emitter
      minDim = 1
      lowerBounds = [1  1  1]
      upperBounds = [155   70   12]
      component = 0
      interiorosity = [cutByBoundary outsideBoundary]

      <STFunc function>
        kind = expression
        expression = 0.0
      </STFunc>

      scaling = 0.0035416751270481556
    </VectorWriter>

    <LinearSolver linearSolver>
      kind = iterativeSolver
      verbosity = 127
      maxIterations = 1000
      tolerance = 1e-08
      convergenceMetric = r0

      <BaseSolver myBS>
        kind = gmres
        kspace = 30
        orthog = classic
      </BaseSolver>

      <Preconditioner precond>
        kind = multigrid
        mgOutput = 0
        mgDefaults = DD
        maxLevels = 10
        smootherType = GaussSeidel
        smootherSweeps = 3
        smootherPrePost = both
        coarseType = Jacobi
        dampingFactor = 1.333
        threshold = 0.0
        increaseDecrease = increasing
      </Preconditioner>

    </LinearSolver>

  </FieldUpdater>

  updateStepOrder = [esSolveStep gradPhiStep edgeToNodeStep copyPerimlowerXStep copyPerimupperXStep copyPerimlowerYStep copyPerimupperYStep]
</MultiField>

<ScalarDepositor ChargeDensityDep>
  kind = areaWeighting
  depField = esMultiField.ChargeDensity
</ScalarDepositor>

<Species emit_elec>
  kind = relBorisVW
  charge = -1.602176487e-19
  mass = 9.10938215e-31
  maxcellxing = 1
  nominalDensity = 1000000000000.0
  nomPtclsPerCell = 1.0
  fields = [esMultiField.nodalE esMultiField.nodalB]
  chargeDeps = [ChargeDensityDep]

  <ParticleSource emit_elec_emitter>
    kind = xvLoaderEmitter
    applyTimes = [0.0 1.0]
    load = False
    loadAfterInit = False
    loadOnShift = False
    emit = True
    emitBasedOnLocalForce = 0
    useCornerMove = 1

    <VelocityGenerator velGen>
      kind = fieldEmitterVelGen
      velocityIsLocal = 1
      work_function = 15.0
      temperature = 1400.0
      alpha = 0.1
      field_enhancement = 1.0
      multiplier = 1.0
      emitterType = Richardson-Dushman
    </VelocityGenerator>

    <STFunc relMacroFluxFunc>
      kind = expression
      expression = 1.0
    </STFunc>

    <PositionGenerator posGen>
      kind = cutCellPosGen
      emitterBoundary = emitter
      emissionOffset = 0.1
      nomMacroPtclsPerStep = 100.0
    </PositionGenerator>

  </ParticleSource>

  <ParticleSink lower0Absorber>
    kind = absorber
    minDim = 1
    lowerBounds = [-1   -1   -1]
    upperBounds = [0   71   13]
  </ParticleSink>

  <ParticleSink upper0Absorber>
    kind = absorber
    minDim = 1
    lowerBounds = [155   -1   -1]
    upperBounds = [156   71   13]
  </ParticleSink>

  <ParticleSink lower1Absorber>
    kind = absorber
    minDim = 2
    lowerBounds = [0   -1   -1]
    upperBounds = [155   0   13]
  </ParticleSink>

  <ParticleSink upper1Absorber>
    kind = absorber
    minDim = 2
    lowerBounds = [0   70   -1]
    upperBounds = [155   71   13]
  </ParticleSink>

  <ParticleSink emit_elec_abso_anode>
    kind = absSavTriCutCell
    minDim = 1
    gridBoundary = anode
    lowerBounds = [-1  -1  -1]
    upperBounds = [156  71  13]
  </ParticleSink>

  <ParticleSink emit_elec_abso_orifice>
    kind = absSavTriCutCell
    minDim = 1
    gridBoundary = cathode_orifice
    lowerBounds = [-1  -1  -1]
    upperBounds = [156  71  13]
  </ParticleSink>

</Species>

<Species Xe_plus>
  kind = relBorisVW
  charge = 1.602176487e-19
  mass = 2.1801711147789e-25
  ionizationEnergy = 1.0
  maxcellxing = 1
  nominalDensity = 1000000000000.0
  nomPtclsPerCell = 1.0
  fields = [esMultiField.nodalE esMultiField.nodalB]
  chargeDeps = [ChargeDensityDep]

  <ParticleSink lower0Absorber>
    kind = absorber
    minDim = 1
    lowerBounds = [-1   -1   -1]
    upperBounds = [0   71   13]
  </ParticleSink>

  <ParticleSink upper0Absorber>
    kind = absorber
    minDim = 1
    lowerBounds = [155   -1   -1]
    upperBounds = [156   71   13]
  </ParticleSink>

  <ParticleSink lower1Absorber>
    kind = absorber
    minDim = 2
    lowerBounds = [0   -1   -1]
    upperBounds = [155   0   13]
  </ParticleSink>

  <ParticleSink upper1Absorber>
    kind = absorber
    minDim = 2
    lowerBounds = [0   70   -1]
    upperBounds = [155   71   13]
  </ParticleSink>

  <ParticleSink Xe_plus_abs_emitter>
    kind = absSavTriCutCell
    minDim = 1
    gridBoundary = emitter
    lowerBounds = [-1  -1  -1]
    upperBounds = [156  71  13]
  </ParticleSink>

  <ParticleSink Xe_plus_abs_cathode_shell>
    kind = absSavTriCutCell
    minDim = 1
    gridBoundary = cathode_shell
    lowerBounds = [-1  -1  -1]
    upperBounds = [156  71  13]
  </ParticleSink>

  <ParticleSink Xe_plus_abs_cathode_orifice>
    kind = absSavTriCutCell
    minDim = 1
    gridBoundary = cathode_orifice
    lowerBounds = [-1  -1  -1]
    upperBounds = [156  71  13]
  </ParticleSink>

</Species>

<History num_elec>
  kind = speciesNumberOf
  species = [emit_elec]
</History>

<History num_Xe_plus>
  kind = speciesNumberOf
  species = [Xe_plus]
</History>


