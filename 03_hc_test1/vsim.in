###############################################
###
### This file is generated by txpp. Do not edit.
###
### Input file : D:\001_zerlingx\literature\HC\006_models\03_hc_test1\vsim.pre
### Output file: D:\001_zerlingx\literature\HC\006_models\03_hc_test1\vsim.in
### Translation: Fri, 14 Dec 2018 21:33:13
###
###############################################

nsteps = 4000
dumpPeriodicity = 100
dt = 1e-12
dimension = 2
floattype = double
verbosity = 127
copyHistoryAtEachDump = 0
useGridBndryRestore = True
constructUniverse = False

<Grid globalGrid>
  verbosity = 127
  numCells = [300  100  12]
  lengths = [0.032 0.01 1.0]
  startPositions = [0.0 0.0 0.0]
  maxCellXings = 1
</Grid>

<Decomp decomp>
  periodicDirs = []
</Decomp>

<EmMaterial PEC>
  kind = conductor
  resistance = 0.0
</EmMaterial>

<GridBoundary vsimPecShapes>
  kind = gridRgnBndry
  calculateVolume = 1
  dmFrac = 0.4
  polyfilename = vsimPecShapes.stl
  flipInterior = True
  scale = [1.0  1.0  1.0]
  printGridData = False
  mappedPolysfile = vsimPecShapes_mapped.stl
</GridBoundary>

<GridBoundary cathode_shell>
  kind = gridRgnBndry
  calculateVolume = 1
  dmFrac = 0.4
  polyfilename = cathode_shell.stl
  flipInterior = True
  scale = [1.0  1.0  1.0]
  printGridData = False
  mappedPolysfile = cathode_shell_mapped.stl
</GridBoundary>

<GridBoundary cathode_orifice>
  kind = gridRgnBndry
  calculateVolume = 1
  dmFrac = 0.4
  polyfilename = cathode_orifice.stl
  flipInterior = True
  scale = [1.0  1.0  1.0]
  printGridData = False
  mappedPolysfile = cathode_orifice_mapped.stl
</GridBoundary>

<GridBoundary anode>
  kind = gridRgnBndry
  calculateVolume = 1
  dmFrac = 0.4
  polyfilename = anode.stl
  flipInterior = True
  scale = [1.0  1.0  1.0]
  printGridData = False
  mappedPolysfile = anode_mapped.stl
</GridBoundary>

<MultiField esMultiField>

  <Field E>
    numComponents = 3
    offset = edge
    kind = regular
    overlap = [1 1]
    labels = [E_x   E_y   E_z]
  </Field>

  <Field Phi>
    numComponents = 1
    offset = none
    kind = regular
    overlap = [1 2]
    labels = [Phi]
  </Field>

  <Field ChargeDensity>
    numComponents = 1
    offset = none
    kind = depField
    overlap = [1 2]
    labels = [ChargeDensity]
  </Field>

  <FieldUpdater gradPhi>
    kind = gradVecUpdater
    factor = -1.0
    lowerBounds = [0  0  0]
    upperBounds = [300   100   12]
    readFields = [Phi]
    writeFields = [E]
  </FieldUpdater>

  <InitialUpdateStep esSolveInitialUpdateStep>
    alsoAfterRestore = True
    updaters = [esSolve]
    messageFields = [Phi]
  </InitialUpdateStep>

  <InitialUpdateStep gradPhiInitStep>
    alsoAfterRestore = True
    updaters = [gradPhi]
    messageFields = [E]
  </InitialUpdateStep>

  <UpdateStep esSolveStep>
    toDtFrac = 1.0
    updaters = [esSolve]
    messageFields = [Phi]
  </UpdateStep>

  <UpdateStep gradPhiStep>
    toDtFrac = 1.0
    updaters = [gradPhi]
    messageFields = [E]
  </UpdateStep>

  <FieldUpdater esSolve>
    kind = linearSolveUpdater
    lowerBounds = [0  0]
    upperBounds = [301  101]
    readFields = [ChargeDensity]
    readComponents = [0]
    writeFields = [Phi]
    writeComponents = [0]
    writeEquationToFile = 0

    <MatrixFiller interiorFiller>
      kind = nodeStencilFiller
      gridBoundary = vsimPecShapes
      rowInteriorosity = [insideBoundary]
      colInteriorosity = [insideBoundary cutByBoundary outsideBoundary]
      component = 0
      minDim = 1
      lowerBounds = [1  1  1]
      upperBounds = [300   100   12]

      <StencilElement lap_dd>
        value = 0.003327237765840162
        minDim = 0
        cellOffset = [0 0 0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

      <StencilElement lap_px>
        value = -0.0007782001011580421
        minDim = 1
        cellOffset = [1 0 0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

      <StencilElement lap_mx>
        value = -0.0007782001011580421
        minDim = 1
        cellOffset = [-1 0 0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

      <StencilElement lap_py>
        value = -0.0008854187817620389
        minDim = 2
        cellOffset = [0 1 0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

      <StencilElement lap_my>
        value = -0.0008854187817620389
        minDim = 2
        cellOffset = [0 -1 0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

      <StencilElement lap_pz>
        value = 0
        minDim = 3
        cellOffset = [0 0 1]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

      <StencilElement lap_mz>
        value = 0
        minDim = 3
        cellOffset = [0 0 -1]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

    </MatrixFiller>

    <VectorWriter interiorWriter>
      kind = nodeFieldVectorWriter
      gridBoundary = vsimPecShapes
      interiorosity = [insideBoundary]
      minDim = 1
      readField = ChargeDensity
      readComponent = 0
      lowerBounds = [1  1  1]
      upperBounds = [300   100   12]
      component = 0
    </VectorWriter>

    <VectorReader phiReader>
      kind = fieldVectorReader
      minDim = 0
      writeField = Phi
      writeComponent = 0
      lowerBounds = [0  0]
      upperBounds = [301  101]
      componentBounds = [0 1]
    </VectorReader>

    <MatrixFiller cathode_shell_bndFiller>
      kind = nodeStencilFiller
      gridBoundary = cathode_shell
      rowInteriorosity = [cutByBoundary outsideBoundary]
      colInteriorosity = [cutByBoundary outsideBoundary]
      component = 0
      minDim = 1
      lowerBounds = [1  1  1]
      upperBounds = [300   100   12]

      <StencilElement ident>
        value = 0.003327237765840162
        minDim = 1
        cellOffset = [0 0 0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

    </MatrixFiller>

    <VectorWriter cathode_shell_bndWriter>
      kind = stFuncNodeVectorWriter
      gridBoundary = cathode_shell
      minDim = 1
      lowerBounds = [1  1  1]
      upperBounds = [300   100   12]
      component = 0
      interiorosity = [cutByBoundary outsideBoundary]

      <STFunc function>
        kind = expression
        expression = 0.0
      </STFunc>

      scaling = 0.003327237765840162
    </VectorWriter>

    <MatrixFiller cathode_orifice_bndFiller>
      kind = nodeStencilFiller
      gridBoundary = cathode_orifice
      rowInteriorosity = [cutByBoundary outsideBoundary]
      colInteriorosity = [cutByBoundary outsideBoundary]
      component = 0
      minDim = 1
      lowerBounds = [1  1  1]
      upperBounds = [300   100   12]

      <StencilElement ident>
        value = 0.003327237765840162
        minDim = 1
        cellOffset = [0 0 0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

    </MatrixFiller>

    <VectorWriter cathode_orifice_bndWriter>
      kind = stFuncNodeVectorWriter
      gridBoundary = cathode_orifice
      minDim = 1
      lowerBounds = [1  1  1]
      upperBounds = [300   100   12]
      component = 0
      interiorosity = [cutByBoundary outsideBoundary]

      <STFunc function>
        kind = expression
        expression = 0.0
      </STFunc>

      scaling = 0.003327237765840162
    </VectorWriter>

    <MatrixFiller anode_bndFiller>
      kind = nodeStencilFiller
      gridBoundary = anode
      rowInteriorosity = [cutByBoundary outsideBoundary]
      colInteriorosity = [cutByBoundary outsideBoundary]
      component = 0
      minDim = 1
      lowerBounds = [1  1  1]
      upperBounds = [300   100   12]

      <StencilElement ident>
        value = 0.003327237765840162
        minDim = 1
        cellOffset = [0 0 0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

    </MatrixFiller>

    <VectorWriter anode_bndWriter>
      kind = stFuncNodeVectorWriter
      gridBoundary = anode
      minDim = 1
      lowerBounds = [1  1  1]
      upperBounds = [300   100   12]
      component = 0
      interiorosity = [cutByBoundary outsideBoundary]

      <STFunc function>
        kind = expression
        expression = 300.0
      </STFunc>

      scaling = 0.003327237765840162
    </VectorWriter>

    <MatrixFiller lowerx_bndFiller>
      kind = stencilFiller
      verbosity = 127
      minDim = 1
      lowerBounds = [0  0  0]
      upperBounds = [1  101  13]
      component = 0

      <StencilElement diag>
        value = -0.003327237765840162
        minDim = 0
        cellOffset = [0  0  0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

      <StencilElement xoff>
        value = 0.003327237765840162
        minDim = 1
        cellOffset = [1  0  0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

    </MatrixFiller>

    <VectorWriter lowerx_bndWriter>
      kind = stFuncVectorWriter
      verbosity = 127
      minDim = 1
      lowerBounds = [0  0  0]
      upperBounds = [1  101  13]
      component = 0

      <STFunc function>
        kind = expression
        expression = 0.0
      </STFunc>

      scaling = 3.549053616896173e-07
    </VectorWriter>

    <MatrixFiller upperx_bndFiller>
      kind = stencilFiller
      verbosity = 127
      minDim = 1
      lowerBounds = [300  0  0]
      upperBounds = [301  101  13]
      component = 0

      <StencilElement diag>
        value = 0.003327237765840162
        minDim = 0
        cellOffset = [0  0  0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

      <StencilElement xoff>
        value = -0.003327237765840162
        minDim = 1
        cellOffset = [-1  0  0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

    </MatrixFiller>

    <VectorWriter upperx_bndWriter>
      kind = stFuncVectorWriter
      verbosity = 127
      minDim = 1
      lowerBounds = [300  0  0]
      upperBounds = [301  101  13]
      component = 0

      <STFunc function>
        kind = expression
        expression = -300.0
      </STFunc>

      scaling = 3.549053616896173e-07
    </VectorWriter>

    <MatrixFiller lowery_bndFiller>
      kind = stencilFiller
      verbosity = 127
      minDim = 2
      lowerBounds = [1  0  0]
      upperBounds = [300  1  13]
      component = 0

      <StencilElement diag>
        value = -0.003327237765840162
        minDim = 0
        cellOffset = [0  0  0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

      <StencilElement yoff>
        value = 0.003327237765840162
        minDim = 2
        cellOffset = [0  1  0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

    </MatrixFiller>

    <VectorWriter lowery_bndWriter>
      kind = stFuncVectorWriter
      verbosity = 127
      minDim = 2
      lowerBounds = [1  0  0]
      upperBounds = [300  1  13]
      component = 0

      <STFunc function>
        kind = expression
        expression = 0.0
      </STFunc>

      scaling = 3.327237765840162e-07
    </VectorWriter>

    <MatrixFiller uppery_bndFiller>
      kind = stencilFiller
      verbosity = 127
      minDim = 2
      lowerBounds = [1  100  0]
      upperBounds = [300  101  13]
      component = 0

      <StencilElement diag>
        value = 0.003327237765840162
        minDim = 0
        cellOffset = [0  0  0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

      <StencilElement yoff>
        value = -0.003327237765840162
        minDim = 2
        cellOffset = [0  -1  0]
        rowFieldIndex = 0
        columnFieldIndex = 0
      </StencilElement>

    </MatrixFiller>

    <VectorWriter uppery_bndWriter>
      kind = stFuncVectorWriter
      verbosity = 127
      minDim = 2
      lowerBounds = [1  100  0]
      upperBounds = [300  101  13]
      component = 0

      <STFunc function>
        kind = expression
        expression = -0.0
      </STFunc>

      scaling = 3.327237765840162e-07
    </VectorWriter>

    <LinearSolver linearSolver>
      kind = iterativeSolver
      verbosity = 127
      maxIterations = 1000
      tolerance = 1e-08
      convergenceMetric = r0

      <BaseSolver myBS>
        kind = gmres
        kspace = 30
        orthog = classic
      </BaseSolver>

      <Preconditioner precond>
        kind = multigrid
        mgOutput = 0
        mgDefaults = DD
        maxLevels = 10
        smootherType = GaussSeidel
        smootherSweeps = 3
        smootherPrePost = both
        coarseType = Jacobi
        dampingFactor = 1.333
        threshold = 0.0
        increaseDecrease = increasing
      </Preconditioner>

    </LinearSolver>

  </FieldUpdater>

  updateStepOrder = [esSolveStep gradPhiStep]
</MultiField>


